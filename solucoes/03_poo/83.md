## Problema

83 - Considera o seguinte programa:

```cs
using System;

public class NPC
{
    public float HP { get; private set; }

    public NPC(float hp) { HP = hp; }

    public void TakeHit(float damage)
    {
        HP -= damage;
        if (HP < 0) HP = 0;
    }
}

public class Program
{
    public static void Main()
    {
        NPC[] npcs = new NPC[]
        {
            new NPC(12.5f),
            new NPC(19.5f)
        };

        NPC npc1 = npcs[0];
        npc1.TakeHit(5f);

        foreach(NPC npc in npcs)
        {
            Console.WriteLine($"HP={npc.HP}");
        }
    }
}
```

Responde às seguintes questões:

1. O que é impresso pelo programa? Descreve sucintamente o que acontece no
`Main()`.
2. Se a classe `NPC` passar a ser uma `struct`, o que é impresso pelo programa?
Porquê?
3. Que alteração temos de fazer no `Main()` (à parte de manipular o NPC
diretamente no _array_), para podermos alterar o valor do HP do NPC, sendo este
uma `struct`?

## Soluções

### Solução 1

1. É impresso o seguinte:
  
```
HP=7,5
HP=19,5
```

No `Main()` o que acontece é que é instanciado um _array_ de NPCs, com 2 NPCs,
um com 12.5HP e outro com 19.5HP. Depois o NPC1 (um NPC que foi intanciado no
`Main`) fica guardado no primeiro índice do _array_, e é lhe aplicado dano com
um valor de 5. Por fim, temos um `foreach` que vai imprimir os HPs de todos os
NPCs por ordem, com os danos aplicados.

2. Se a classe `NPC` passar a ser uma `struct`, é impresso pelo ecrã o
   seguinte:

```
HP=12,5
HP=19,5
```

Isto acontece porque, quando usamos uma struct, é criada uma cópia dos
conteúdos do tipo de valor (NPC passa a ser um tipo de valor), e a cópia
e o original são distintos. Ou seja, mudanças na cópia não afeta o original e
vice-versa.

3. A alteração temos de fazer no `Main()` (à parte de manipular o NPC
diretamente no _array_), para podermos alterar o valor do HP do NPC, sendo este
uma `struct` é na seguinte parte do código:

```CSharp
NPC[] npcs = new NPC[]
    {
        new NPC(12.5f),
        new NPC(19.5f)
    };

ref NPC npc1 = ref npcs[0];
npc1.TakeHit(5f);
```

Isto passa uma referência da `struct` ao _array_ `npcs`. Assim podemos
alterar o HP do NPC usando `TakeHit()` com uma instância da referência
guardada.

*Por [Diana Nóia](https://github.com/DianaNoia)*
